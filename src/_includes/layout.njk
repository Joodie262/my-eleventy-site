<!DOCTYPE html>
<html lang="en" data-theme="purple">
<head>
  <meta charset="UTF-8" />
  <title>{{ title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="{{ '/assets/favicon.svg' | url }}" type="image/svg+xml">
  <link rel="stylesheet" href="{{ '/style.css' | versioned | url }}">
  <link rel="alternate" type="application/atom+xml"
      title="Judy Winsor — Journal Atom Feed"
      href="https://journal.judywinsor.com/feed.atom" />
  <link rel="alternate" type="application/rss+xml" title="Judy Winsor — Journal RSS Feed" href="https://journal.judywinsor.com/feed.xml" />
</head>
<body>
  <div class="site-container">
    <header>
      <h1><a href="{{ '/' | url }}">Judy Winsor</a></h1>
      <p class="subtitle">Personal website of Judy Winsor</p>
    </header>

    <!-- New Nav --> 
    {% include "partials/nav-list.njk" %}

    <main>
{% if page.url != "/" %}
{% if page.url != "/tags/" %}
  <article class="h-entry">
<h1 class="p-name">{{ title }}</h1>
<p class="published"><small>
    <span class="meta-svg" style="display:inline-block; margin-right:0.2rem; vertical-align:middle;"><!-- Decorative (ignored by screen readers) -->
{% icon "calendar", { class: "meta-svg", width: 14, height: 14, style: "display:inline-block; margin-right:0.2rem;" } %}</span><time class="dt-published"
      datetime="{{ date | formatDate("yyyy-LL-dd'T'HH:mmZZ") }}">Date Published: {{ date | formatDate("MMMM d, yyyy") }}
</time>
  </p>
  <p class="p-author h-card">
  <span class="meta-svg" style="display:inline-block; margin-right:0.2rem; vertical-align:middle;"><!-- Decorative (ignored by screen readers) -->
{% icon "user", { class: "meta-svg", width: 14, height: 14, style: "display:inline-block; margin-right:0.2rem;" } %}</span><Written By: <a class="p-name u-url u-uid" rel="me" href="{{ '/' | url }}">Judy Winsor</a>
</p>
{% endif %}
{% if tags %}
  <p class="post-tags"><span class="meta-svg" style="display:inline-block; margin-right:0.2rem; vertical-align:middle;"><!-- Decorative (ignored by screen readers) -->
{% icon "hash", { class: "meta-svg", width: 14, height: 14, style: "display:inline-block; margin-right:0.2rem;" } %}</span>
   {% for tag in tags %}
  {% set lowerTag = tag | lower %}
  <a href="{{ '/tags/' | url }}#{{ lowerTag | slug }}">{{ lowerTag }}</a>
{% endfor %}
  </small></p>
{% endif %}
{% endif %}

<div class="e-content">
          {{ content | safe }}
          {% if page.url != "/" %}
          {% if page.url != "/tags/" %}
          <div class="postend"><ul style="list-style:none; padding:0; margin:0;">
  <li><a href="mailto:judy@judywinsor.com"><span class="meta-svg" style="display:inline-block; margin-right:0.2rem; vertical-align:middle;"><!-- Decorative (ignored by screen readers) -->
{% icon "mail", { class: "meta-svg", width: 14, height: 14, style: "display:inline-block; margin-right:0.2rem;" } %}</span>Reply via email</a>
  <li><a href="https://journal.judywinsor.com/feed.xml"><span class="meta-svg" style="display:inline-block; margin-right:0.2rem; vertical-align:middle;">
    {% icon "rss" %}</span>Subscribe via RSS</a>
  <li><a href="{{ '/journal-index.html' | url }}"><span class="meta-svg" style="display:inline-block; margin-right:0.2rem; vertical-align:middle;"><!-- Decorative (ignored by screen readers) -->
{% icon "arrow-left", { class: "meta-svg", width: 14, height: 14, style: "display:inline-block; margin-right:0.2rem;" } %}</span>Back to Posts</a>
  </ul></div>
  {% endif %}
  {% endif %}
          </div>
  </article>
    </main>

<!-- Footer --> 
{% include "partials/footer.njk" %}
  </div>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const nav = document.querySelector(".nav");
  const navToggle = nav.querySelector(".nav-toggle");
  const siteMenu = document.getElementById("site-menu");

  const isOpen = () => siteMenu.classList.contains("show");

  function openMenu() {
    siteMenu.classList.add("show");
    navToggle.setAttribute("aria-expanded", "true");
  }

  function closeMenu() {
    siteMenu.classList.remove("show");
    navToggle.setAttribute("aria-expanded", "false");
  }

  function toggleMenu() {
    isOpen() ? closeMenu() : openMenu();
  }

  // Toggle button
  navToggle.addEventListener("click", function (e) {
    e.stopPropagation();
    toggleMenu();
  });

  // Click/tap outside closes the menu
  function outsideHandler(e) {
    if (!isOpen()) return;
    if (!nav.contains(e.target)) closeMenu();
  }
  document.addEventListener("click", outsideHandler);
  document.addEventListener("touchstart", outsideHandler, { passive: true });

  // Escape key closes
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape" && isOpen()) {
      closeMenu();
      navToggle.focus();
    }
  });

  // Close after clicking any link in the menu (optional)
  siteMenu.addEventListener("click", function (e) {
    const link = e.target.closest("a");
    if (link && isOpen()) closeMenu();
  });
});
</script>
<script>
  document.getElementById('theme-toggle').onclick = function() {
    document.body.dataset.theme =
      document.body.dataset.theme === 'theme-teal' ? '' : 'theme-teal';
  };
</script>
</body>
</html>